"use strict";
/*!
 * fullpage.js Fading Effect Extension 0.2.0
 * for fullpage.js v4
 * https://github.com/alvarotrigo/fullPage.js
 *
 * @license This code has been bought from www.alvarotrigo.com/fullPage/extensions/ and it is not free to use or distribute.
 * Copyright (C) 2016 alvarotrigo.com - A project by Alvaro Trigo
 */function showContent(){$("[data-login-box]").css("display","none"),$("[data-content]").css("display","flex")}function hideContent(){$("[data-login-box]").css("display","flex"),$("[data-content]").css("display","none")}function getOtpCode(e,t){$(".submit-box").addClass("preloader-active"),$(".login-error").hide(),$.ajax({type:"POST",url:"https://virtual-book-production.up.railway.app/otp/request",data:`{ "email": "${e}"}`,success:function(e){$(".submit-box").removeClass("preloader-active"),t.show(),t.prop("required",!0)},error:function(e,t,i){$(".login-error").show(),$(".submit-box").removeClass("preloader-active")},contentType:"application/json"})}window.fp_fadingEffectExtension=function(){var e,t,i,o,n,a,s=this,r=window.fp_utils,c=window.fullpage_api,l=r.$,d=c.getFullpageData(),p=d.options,u=d.internals,f=p.scrollingSpeed,m=".fullpage-wrapper",h=".active",v=".fp-section",$=v+h,g=".fp-slide",w=".fp-slidesContainer",b=g+h,k="fp-notransition",y="fp-fading-animations",x="#"+y,E="fp-fading-sheet",T="#"+E;function C(e){r.addClass(n,k),clearTimeout(a),a=setTimeout((function(){r.removeClass(n,k)}),900)}function S(e){e.detail?(o=!1,z()):(o=i.autoScrolling,D())}function V(){(n=l(m)[0]).addEventListener("afterResponsive",S),n.addEventListener("destroy",z),window.addEventListener("resize",C);var e=p.scrollOverflowHandler;p.scrollOverflowHandler=null,i=r.deepExtend({},p),o=i.autoScrolling,p.scrollOverflowHandler=e,i.scrollOverflowHandler=e,p.scrollBar=!1,M("sections")&&c.setAutoScrolling(!0);var a=M("slides")?N(g):"",s=M("sections")?N(v):"";p.fadingEffect&&q(E,s+a),u.removeAnimation(l(w)),clearTimeout(t),t=setTimeout(j,300)}function M(e){return!0===p.fadingEffect||p.fadingEffect===e}function q(e,t){if(!l("#"+e).length){var i=document.head||document.getElementsByTagName("head")[0];r.appendTo((o=e,n=t,(a=document.createElement("style")).type="text/css",a.id=o,a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n)),a),i)}var o,n,a}function j(){e="all "+f+"ms "+p.easingcss3;var t=M("slides")?A(g):"",i=M("sections")?A(v):"";q(y,t+i+"\n                .fp-notransition .fp-section,\n                .fp-notransition .fp-slide {\n                    -webkit-transition: none !important;\n                    transition: none !important;\n                }\n            ")}function A(t){return t+"{-webkit-transition: "+e+";transition: "+e+";transform: translatez(0);}"}function N(e){return(e===g?".fp-slidesContainer {width: 100% !important;transform: none!important;transition: none !important;transform: translatez(0);}":m+"{transition: none !important;transform: translatez(0);}")+e+"{width: 100% !important;position: absolute !important;left: 0;top: 0;visibility: hidden;opacity: 0;}"+e+".active{visibility: visible;opacity: 1;z-index: 1}"}function z(){if(r.remove(l(x)),O()){var e=l(b,l($)[0])[0],t=l(w,l($)[0]);u.removeAnimation(t),r.remove(l(T)),p.scrollBar=i.scrollBar,c.setAutoScrolling(o),null!=e&&u.silentLandscapeScroll(e)}}function O(){return l(T).length}function D(){p.fadingEffect=i.fadingEffect,O()||(V(),window.scrollTo(0,0),u.silentScroll(0))}s.update=function(e){r.remove(l(x)),f=e,j()},s.turnOn=D,s.turnOff=z,s.apply=V,s.c=u.c;var I=s["common".charAt(0)];return"complete"===document.readyState&&I("fadingEffect"),window.addEventListener("load",(function(){I("fadingEffect")})),s},sessionStorage.getItem("login")&&showContent(),$("#wf-form-registration").submit((function(e){$(".submit-box").addClass("preloader-active"),e.preventDefault();let t=$(this).find("input[name=email]").val(),i=$(this).find("input[name=Name]").val();return console.log(t),$.ajax({type:"POST",url:"https://virtual-book-production.up.railway.app/auth/register",data:`{ "email": "${t}" , "name": "${i}" , "code": "INVITE-123-INVITE" }`,success:function(e){$(".box-form-access").hide(),$(".register-success").show(),$(".submit-box").removeClass("preloader-active")},error:function(e,t,i){alert("Error"),$(".submit-box").addClass("preloader-active")},contentType:"application/json",dataType:"json"}),!1})),$("[data-login-box] form").submit((function(e){e.preventDefault(),$(".submit-box").addClass("preloader-active"),$(".login-error").hide();let t=$(this).find("input[name=email]").val(),i=$(this).find("input[name=number]");return i.is(":hidden")?getOtpCode(t,i):$.ajax({type:"POST",url:"https://virtual-book-production.up.railway.app/auth/login",data:`{ "email": "${t}" ,"otpCode": "${i.val()}" }`,success:function(e){$(".submit-box").removeClass("preloader-active"),showContent(),sessionStorage.setItem("login",!0)},error:function(e,t,i){$(".submit-box").removeClass("preloader-active"),$(".login-error").show()},contentType:"application/json",dataType:"json"}),console.log(t),!1})),window.matchMedia("(min-width: 479px)").matches&&($("#video1 ")[0].src="https://kinescope.io/ns6n9PF7PiRtkya6wZM2v1/1080p",$("#video1 ").attr("autoplay",!0),setTimeout((()=>{$("#video2 ")[0].src="https://kinescope.io/wTU53VzMxe4MAXWrdnUCDH/1080p",$("#video3 ")[0].src="https://kinescope.io/9etj7jNNo24VE1hRVaJhJ4/1080p",$("#video4 ")[0].src="https://kinescope.io/oNvx7jQA93KPeQqw8ChAut/1080p",$("#video5 ")[0].src="https://kinescope.io/oSb3aN5KxZQJPNWEmwJKj6/1080p",$("#video6 ")[0].src="https://kinescope.io/o6eM4E77HkpKrs6eYbc8wD/1080p"}),500)),window.matchMedia("(max-width: 479px)").matches&&($("#video1 ")[0].src="https://kinescope.io/sBnvfTR3qicgF6a6xrP99B/1080p",$("#video1 ").attr("autoplay",!0),$("#video2")[0].src="https://kinescope.io/ajtwpy7ogwF1k32361qjVi/1080p",$("#video3 ")[0].src="https://kinescope.io/gZUzkGYndtVAzGDEW5HMNs/1080p",$("#video4 ")[0].src="https://kinescope.io/tKVu9duzuapjNRPYzCY7eg/1080p",$("#video5 ")[0].src="https://kinescope.io/4EY5nfJpWCqogedmTC387w/1080p",$("#video6 ")[0].src="https://kinescope.io/5oZb59xX3wH65abMdUsZTr/1080p");const linkBox=$(".box-link");let muted=!0;$(".link-page").removeClass("active");const circle=$(".circle-link"),allVideos=$(".box-video").children(),disatnce=$(".list-item-link").eq(1).offset().top-$(".list-item-link").eq(1).parent().offset().top-$(".list-item-link").eq(1).parent().scrollTop(),slideHeight=20;new fullpage("#fullpage",{fixedElements:".section-menu, .wrapper-box-link",scrollingSpeed:10,credits:{enabled:!1,label:"Made",position:"right"},normalScrollElements:".wrapper-author, .wrapper-feedback, .wrapper-benefit",licenseKey:"5172D4F4-1EFD4C7A-934B4F78-5284A4ED",fadingEffectKey:"TU9iV2x6YUd0aFltOXZhM011WTI5dDhBXzNuS1ptRmthVzVuUldabVpXTjA3S1M=",fadingEffect:!0,lazyLoading:!1,onLeave:function(e,t,i,o){$(e.item).find("video").trigger("pause"),$(t.item).find("video").trigger("play"),0===t.index?$(".mobile-icon").show():$(".mobile-icon").hide(),$(".box-link").css("transform",`translate(0%, ${20*-t.index}%)`),circle.css("transform",`translate(0px, ${disatnce*t.index}px)`),allVideos.each((function(){$(this).find("video").length>0&&($(this).find("video")[0].muted=!0)})),muted||($(t.item).find("video")[0].muted=!1)}});const box=document.querySelector(".wrapper-box-link");box.addEventListener("swiped",(function(e){"up"===e.detail.dir?fullpage_api.moveSectionDown():"down"===e.detail.dir&&fullpage_api.moveSectionUp()}));const book=$(".book-video"),author=$(".author-video"),game=$(".game-video"),vr=$(".vr-video"),buy=$(".buy-video"),feedback=$(".feedback-video");function changeMenu(e,t){$(".list-item-link").removeClass("active"),$(".list-item-link").eq(e).addClass("active"),circle.css("transform",`translate(0px, ${disatnce*e}px)`),showVideo(t)}function showVideo(e){allVideos.each((function(){$(this).find("video").length>0&&($(this).find("video")[0].muted=!0)})),muted||(e.find("video")[0].muted=!1)}function showBack(e){"book"===e&&showVideo(book),"buy"===e&&showVideo(buy),"game"===e&&showVideo(game),"author"===e&&showVideo(author),"vr"===e&&showVideo(vr),"feedback"===e&&showVideo(feedback)}function changeMuteIcon(e){"mute"===e?(muted=!0,$(".icon-voice").show(),$(".icon-mute").hide()):(muted=!1,$(".icon-mute").show(),$(".icon-voice").hide())}$(".list-item-link").on("mouseenter",(function(){$(this).attr("data-category");const e=$(this).offset().top-$(this).parent().offset().top-$(this).parent().scrollTop();circle.css("transform",`translate(0px, ${e}px)`)})),$(".link-page").click((function(){$(".mobile-icon").hide(),fullpage_api.moveTo($(this).index()+1),$(".wrapper-box-link").css("pointer-events","none");$(this).attr("data-category");fullpage_api.setAllowScrolling(!1),window.matchMedia("(max-width: 479px)").matches&&$(".wrapper-link-page").hide(),$(".link-page").removeClass("active"),$(this).addClass("active")})),$(".mob-link").click((function(){window.matchMedia("(max-width: 479px)").matches&&($(".wrapper-link-page").hide(),$(".mobile-icon").hide(),fullpage_api.moveTo($(this).index()+1))})),$(".list-item-link").click((function(){fullpage_api.moveTo($(this).index()),$(".mobile-icon").hide(),$(".wrapper-box-link").css("pointer-events","none"),window.matchMedia("(max-width: 479px)").matches&&$(".wrapper-link-page").hide(),fullpage_api.setAllowScrolling(!1)})),$(".wrapper-back").click((function(){setTimeout((()=>{$(".wrapper-link-page").show()}),1e3),setTimeout((()=>{$(".wrapper-box-link").css("pointer-events","auto")}),1e3),$(".link-page").removeClass("active"),fullpage_api.setAllowScrolling(!0)})),$(".wrapper-play-gallery").click((function(){$(".video-active").find("video")[0].muted=!0,changeMuteIcon("mute"),$("iframe.yt-video")[0].contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*")})),$(".next").click((function(){$("iframe.yt-video")[0].contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")})),$(".close-popup").click((function(){$("iframe.yt-video")[0].contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")})),$(".wrapper-box-audio").click((function(){const e=$(".fp-section.active").find("video")[0];$(".fp-section.active").find("video").length>0&&(!1===e.muted?(e.muted=!0,changeMuteIcon("mute")):(e.muted=!1,changeMuteIcon("unmute")))})),$('[data-name="Выбрать страну"] select').change((function(){$('[aria-label="Выбрать страну"]').attr("data-name",$(this).val())}));const observer=new MutationObserver((e=>{for(let t of e)if("attributes"===t.type&&"style"===t.attributeName){const e=t.target;if("none"===e.style.display&&e.classList.contains("preloader")){const e=new URLSearchParams(window.location.search);if(e.has("buy")){const e=document.querySelector('[data-category="buy"]');e?e.click():console.warn('Элемент с атрибутом data-category="buy" не найден.')}if(e.has("goroshinka")){document.querySelector('[data-category="book"]').click()}if(e.has("contact")){document.querySelector('[data-category="feedback"]').click()}if(e.has("game")){document.querySelector('[data-category="game"]').click()}if(e.has("ar")){document.querySelector('[data-category="ar"]').click()}}}})),preloaderElements=document.querySelectorAll(".preloader");preloaderElements.forEach((e=>{observer.observe(e,{attributes:!0})}));