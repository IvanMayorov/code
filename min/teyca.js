const rangeInputClients=document.querySelector('input[name="clients"]'),rangeInputKass=document.querySelector('input[name="kass"]'),clientsTargetDiv=document.querySelector("[data-clients]"),kassTargetDiv=document.querySelector("[data-kass]"),resultBox=document.querySelectorAll("[data-final-result]"),resultBoxes=Array.from(document.querySelectorAll('input[name="result"]')).map((e=>e.closest("label"))),tariffRadioButtons=document.querySelectorAll('input[name="tariff"]'),priceLabel=document.querySelector("[data-price-label]"),tariffButton=document.querySelectorAll("[data-tariff-button]"),checkboxTg=document.querySelectorAll('input[data-name="Checkbox Tg"]'),customCheckboxes=document.querySelectorAll(".custom_checkbox"),tariffLabels=document.querySelectorAll(".tariff-label");let clickedCheker=!1;tariffLabels.forEach((e=>e.classList.remove("is-disabled")));let kassValueGlobal=1;tariffButton.forEach((e=>{e.addEventListener("click",(t=>{const a=e.getAttribute("data-tariff-button");document.querySelector(`input[name="tariff"][value="${a}"]`).checked=!0,calculateTotalCost(),"prof"===a&&(toggleCustomCheckboxes(),addActiveClassToCheckboxes())}))}));const revertCalcButton=document.querySelectorAll("[data-revert-calc]");let tooltipVisible=!0,previousTariff="start";const tooltip=document.querySelector(".calc_tooltip"),tariffNameElement=document.querySelector("[data-tariff-name]");function updateSelectedTariff(e){Array.from(tariffRadioButtons).find((e=>e.checked));e<=5e3&&e>1e3&&kassValueGlobal<8?(tariffLabels.forEach((e=>e.classList.remove("is-disabled"))),setTariff("standard","Стандарт"),previousTariff="start",customCheckboxes.forEach((e=>e.classList.remove("is-active")))):e>5e3?(tariffLabels[0].classList.add("is-disabled"),tariffLabels[1].classList.add("is-disabled"),setTariff("prof","Профессионал"),toggleCustomCheckboxes(),previousTariff="standard",customCheckboxes.forEach((e=>e.classList.add("is-active")))):kassValueGlobal<7&&(setTariff("start","Старт"),customCheckboxes.forEach((e=>e.classList.remove("is-active"))))}function setTariff(e,t){document.querySelector(`input[name="tariff"][value="${e}"]`).checked=!0,tooltipVisible&&(tooltip.style.display="flex",tariffNameElement.textContent=t)}revertCalcButton.forEach((e=>{e.addEventListener("click",(()=>{"start"===previousTariff?(document.querySelector('input[name="tariff"][value="start"]').checked=!0,tariffLabels.forEach((e=>e.classList.remove("is-disabled"))),customCheckboxes.forEach((e=>e.classList.remove("is-active")))):"standard"===previousTariff&&(document.querySelector('input[name="tariff"][value="standard"]').checked=!0,tariffLabels.forEach((e=>e.classList.remove("is-disabled"))),customCheckboxes.forEach((e=>e.classList.remove("is-active")))),tooltip.style.display="none"}))})),document.querySelectorAll("[data-tooltip-close]").forEach((e=>{e.addEventListener("click",(()=>{document.querySelector(".calc_tooltip").style.display="none",tooltipVisible=!1}))}));const tariffPrices={start:2990,standard:5490,prof:8990},additionalPointPrices={start:1990,standard:1490,prof:990},formatNumberWithSpaces=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "),updateSliderBackground=e=>{const t=e.value/e.max*100;e.style.background=`linear-gradient(to right, #A2C5FF ${t}%, rgba(0, 0, 0, 0.05) ${t}%)`},calculateTotalCost=()=>{const e=document.querySelector('input[name="tariff"]:checked').value,t=rangeInputKass?rangeInputKass.value:1,a=tariffPrices[e]+(t-1)*additionalPointPrices[e];"prof"===e&&addActiveClassToCheckboxes(),resultBoxes.forEach((s=>{const o=s.querySelector('input[name="result"]').value;let r=a;t>=100?(resultBox.forEach((e=>{e.textContent="по запросу"})),s.querySelector("[data-result]").textContent="по запросу",document.querySelectorAll("[data-month]").forEach((e=>{e.style.display="none"}))):(document.querySelectorAll("[data-month]").forEach((e=>{e.style.display="block"})),"3"===o?r=.9*a:"6"===o?r=.85*a:"12"===o&&(r=.8*a),s.querySelector("[data-result]").textContent=`${formatNumberWithSpaces(r.toFixed())} ₽ / мес`,s.querySelector('input[name="result"]').checked&&(resultBox.forEach((e=>e.textContent=`${formatNumberWithSpaces(r.toFixed())} ₽`)),priceLabel.textContent=`${additionalPointPrices[e]} ₽`))}))};rangeInputClients&&(rangeInputClients.addEventListener("input",(e=>{const t=e.target.value;clientsTargetDiv&&(clientsTargetDiv.textContent=t),updateSelectedTariff(t),calculateTotalCost(),updateSliderBackground(rangeInputClients)})),clientsTargetDiv.isContentEditable&&clientsTargetDiv.addEventListener("input",(e=>{const t=parseInt(e.target.textContent,10);isNaN(t)||(rangeInputClients.value=t,updateSliderBackground(rangeInputClients),updateSelectedTariff(t),calculateTotalCost())}))),rangeInputKass&&(rangeInputKass.addEventListener("input",(e=>{const t=e.target.value;kassValueGlobal=t;Array.from(tariffRadioButtons).find((e=>e.checked));kassTargetDiv&&(kassTargetDiv.textContent=t),t>8?(document.querySelector('input[name="tariff"][value="prof"]').checked=!0,setTariff("prof","Профессионал"),customCheckboxes.forEach((e=>e.classList.add("is-active")))):t>7?(document.querySelector('input[name="tariff"][value="standard"]').checked=!0,tariffLabels.forEach((e=>e.classList.remove("is-disabled"))),setTariff("standard","Стандарт"),customCheckboxes.forEach((e=>e.classList.remove("is-active")))):(document.querySelector('input[name="tariff"][value="start"]').checked=!0,setTariff("start","Старт"),tariffLabels.forEach((e=>e.classList.remove("is-disabled"))),customCheckboxes.forEach((e=>e.classList.remove("is-active")))),calculateTotalCost(),updateSliderBackground(rangeInputKass)})),kassTargetDiv.isContentEditable&&kassTargetDiv.addEventListener("input",(e=>{const t=parseInt(e.target.textContent,10);isNaN(t)||(rangeInputKass.value=t,updateSliderBackground(rangeInputKass),calculateTotalCost())}))),rangeInputClients&&updateSliderBackground(rangeInputClients),rangeInputKass&&updateSliderBackground(rangeInputKass),tariffRadioButtons.forEach((e=>{e.addEventListener("change",(()=>{calculateTotalCost()}))})),resultBoxes.forEach((e=>{e.querySelector('input[name="result"]').addEventListener("change",(()=>{calculateTotalCost()}))}));const editableElements=document.querySelectorAll("[contenteditable='true']");function toggleCustomCheckboxes(){Array.from(customCheckboxes).some((e=>e.classList.contains("is-active")))?(customCheckboxes.forEach((e=>e.classList.remove("is-active"))),tariffLabels.forEach((e=>e.classList.remove("is-disabled"))),console.log("standard")):addActiveClassToCheckboxes()}function addActiveClassToCheckboxes(){customCheckboxes.forEach((e=>e.classList.add("is-active"))),tariffLabels[0].classList.add("is-disabled"),tariffLabels[1].classList.add("is-disabled")}function clickedCustomCheckboxes(){Array.from(customCheckboxes).some((e=>e.classList.contains("is-clicked")))?customCheckboxes.forEach((e=>e.classList.remove("is-clicked"))):customCheckboxes.forEach((e=>e.classList.add("is-clicked")))}editableElements.forEach((e=>{e.addEventListener("input",(()=>{e.textContent=e.textContent.replace(/\D/g,"")})),e.addEventListener("paste",(e=>{e.preventDefault();const t=(e.clipboardData||window.clipboardData).getData("text").replace(/\D/g,"");document.execCommand("insertText",!1,t)}))})),customCheckboxes.forEach((e=>e.classList.remove("is-active"))),customCheckboxes.forEach((e=>{e.addEventListener("click",(()=>{clickedCheker=!0,setTariff("prof","Профессионал"),toggleCustomCheckboxes(),clickedCustomCheckboxes(),calculateTotalCost()}))}));