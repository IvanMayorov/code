const SELECTORS={MODAL_TARGET:"[data-modal-target]",MODAL_ID:"[data-modal-id]",MODAL_CLOSE:'[data-modal-action="close"]',MODAL_OVERLAY:".s-modal"},elements={body:document.body,document:document},modalState={isOpen:!1,currentModal:null,currentOverlay:null,scrollY:0};function toggleBodyScroll(e=!0){e?(modalState.scrollY=window.scrollY,elements.body.classList.add("modal-open"),elements.body.style.top=`-${modalState.scrollY}px`):(elements.body.classList.remove("modal-open"),elements.body.style.top="",window.scrollTo(0,modalState.scrollY),modalState.scrollY=0)}function toggleElementVisibility(e,o=!0,t=""){e&&(o?(e.style.display=e.classList.contains("s-modal")?"flex":"block",e.classList.add(t),requestAnimationFrame((()=>{e.classList.remove(t)}))):(e.classList.add(t),setTimeout((()=>{e&&(e.style.display="none",e.classList.remove(t))}),300)))}function openModal(e){if(!e||modalState.isOpen)return;if(!e.classList.contains("s-modal"))return void console.warn("Element is not a s-modal");const o=e.querySelector("[data-modal-content]")||e.children[0];o?(modalState.isOpen=!0,modalState.currentModal=o,modalState.currentOverlay=e,toggleBodyScroll(!0),toggleElementVisibility(o,!0,"modal-content-hidden"),toggleElementVisibility(e,!0,"modal-overlay-hidden")):console.warn("No modal content found in s-modal")}function closeModal(e=modalState.currentModal,o=modalState.currentOverlay){e&&o&&modalState.isOpen&&(toggleElementVisibility(e,!1,"modal-content-hidden"),toggleElementVisibility(o,!1,"modal-overlay-hidden"),modalState.isOpen=!1,modalState.currentModal=null,modalState.currentOverlay=null,toggleBodyScroll(!1))}function openModalById(e){const o=document.querySelector(`.s-modal[data-modal-id="${e}"]`);return o?(openModal(o),!0):(console.warn(`Modal with ID "${e}" not found`),!1)}function closeModalById(e){const o=document.querySelector(`.s-modal[data-modal-id="${e}"]`);if(o){const e=o.querySelector("[data-modal-content]")||o.children[0];if(e)return closeModal(e,o),!0}return console.warn(`Modal with ID "${e}" not found or not open`),!1}function handleModalEvents(e){const o=e.target;if(o.matches(SELECTORS.MODAL_TARGET)){e.preventDefault();openModalById(o.getAttribute("data-modal-target"))}else if(o.matches(SELECTORS.MODAL_CLOSE)){e.preventDefault();const t=o.closest(SELECTORS.MODAL_OVERLAY);if(t){closeModal(t.querySelector("[data-modal-content]")||t.children[0],t)}}else if(o.matches(SELECTORS.MODAL_OVERLAY)){const e=o.querySelector("[data-modal-content]")||o.children[0];e&&closeModal(e,o)}else;}function handleKeydown(e){"Escape"===e.key&&modalState.isOpen&&closeModal()}function initModal(){elements.document.addEventListener("click",handleModalEvents),elements.document.addEventListener("keydown",handleKeydown)}window.SimpleModal={open:openModal,openById:openModalById,close:closeModal,closeById:closeModalById,isOpen:()=>modalState.isOpen},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initModal):initModal();