var Webflow=Webflow||[];Webflow.push((function(){function e(e,t){const r=document.querySelector(t),o=document.querySelector(e);if(!r||!o)return console.error(`Elements not found: ${t} or ${e}`),0;const n=r.getBoundingClientRect();return o.getBoundingClientRect().bottom-n.top+5}gsap.matchMedia().add("(min-width: 768px)",(()=>{gsap.from("[data-footer-item]",{opacity:0,y:"-50vh",stagger:{each:.2,from:"random"},duration:1,scrollTrigger:{trigger:".footer-section",start:"top 40%",end:"bottom 20%"}})})),console.log("DOMContentLoaded");document.querySelectorAll("[data-split]").forEach((e=>{new SplitText(e,{type:"chars, words",charsClass:"char",wordsClass:"word"})})),gsap.from(".s3-container .char",{opacity:0,filter:"blur(10px)",duration:.7,stagger:.05,scrollTrigger:{trigger:".s3-container",start:"top 70%",end:"bottom 20%"}}),gsap.from(".s6-container .char",{opacity:0,filter:"blur(10px)",duration:.7,stagger:.05,scrollTrigger:{trigger:".s6-container",start:"top 70%",end:"bottom 20%"}});const t=gsap.timeline({scrollTrigger:{trigger:".s4-heading-wrap",start:"top 90%",end:"bottom 20%"}});t.from(".s4-container .char",{opacity:0,filter:"blur(10px)",duration:.7,stagger:.05}),t.from(".s4-container .text-18, .s4-container .button",{opacity:0,filter:"blur(10px)",duration:.7,stagger:.4},">-=0.7"),t.from(".cell",{opacity:0,filter:"blur(10px)",duration:.7,ease:"power2.out",stagger:{each:.05,from:"random"}},"+0.6").from(".character",{opacity:0,filter:"blur(10px)",duration:.7,ease:"power2.out",stagger:{each:.05,from:"random"}},">-=0.4");gsap.timeline({scrollTrigger:{trigger:".s2-container",start:"top 60%",toggleActions:"play none none none"},paused:!0}).from(".section-tag",{opacity:0,y:40,filter:"blur(10px)",duration:.7,ease:"power2.out"}).from(".section-2 .char",{opacity:0,stagger:.04,duration:.7,filter:"blur(10px)",ease:"power2.out"},"-=0.4");if(window.innerWidth>768){const n=gsap.timeline({scrollTrigger:{trigger:".section-2",start:"0% top",end:"100% bottom",scrub:2}});n.from(".s2-square-box1",{y:-e(".s2-square-box1",".section-2"),duration:.5,ease:"power2.out"}),n.from(".s2-square-box2",{y:-e(".s2-square-box2",".section-2"),duration:.5,ease:"power2.out"},"-=0.3"),n.from(".s2-square-box3",{y:-e(".s2-square-box3",".section-2"),duration:.5,ease:"power2.out"},"-=0.3"),n.from(".s2-square-box4",{y:-e(".s2-square-box4",".section-2"),duration:.5,ease:"power2.out"},"-=0.3"),n.from(".s2-box-content",{opacity:0,xPercent:50,duration:.5,stagger:.1,ease:"power2.out"},"-=0.2")}else{function r(e,t){gsap.from(e,{opacity:0,filter:"blur(10px)",yPercent:10,duration:1,ease:"power2.out",scrollTrigger:{trigger:t||e,start:"0% 80%",end:"100% 50%"}})}document.querySelectorAll(".s2-square-box").forEach(((e,t)=>{const r=gsap.timeline({scrollTrigger:{trigger:e,start:"0% 80%",end:"100% 50%"}});r.from(e.querySelector(".s2-color-box"),{opacity:0,xPercent:-50,duration:.5,ease:"power2.out"}),r.from(e.querySelectorAll(".s2-box-content > *"),{opacity:0,xPercent:50,filter:"blur(10px)",duration:.5,stagger:.1,ease:"power2.out"},"<+=.2")})),r(".s3-slide1-right",".s3-slide1-right"),r(".s3-slide1-left",".s3-slide1-left"),r(".s3-slide2-content",".s3-slide2-content"),r(".maxw-222-mob",".maxw-222-mob"),r(".s6-content",".s6-content")}const o=gsap.timeline({scrollTrigger:{trigger:".backers_section",start:"top 50%",end:"bottom 20%"}});o.from(".s5-container",{opacity:0}),o.from(".backers_section .char",{opacity:0,filter:"blur(10px)",duration:.7,stagger:.05},"<");document.querySelectorAll(".s5-box").forEach(((e,t)=>{o.from(e,{y:"-100vh",opacity:0,filter:"blur(10px)",duration:.7},">-=0.6")}))}));const swiperGames=new Swiper(".swiper-games",{slidesPerView:"auto",spaceBetween:16,centeredSlides:!1,mousewheel:{forceToAxis:!0},grabCursor:!0,speed:300,navigation:{nextEl:".swiper-games-next",prevEl:".swiper-games-prev"},on:{resize:function(e){479>window.innerWidth?(e.disable(),e.el.classList.add("-non-slider")):(e.enable(),e.el.classList.remove("-non-slider"))}}});document.querySelectorAll("[data-nexus]").forEach((e=>{e.addEventListener("click",(function(){swiperGames&&swiperGames.slideTo(1)}))}));const swiperGames2=new Swiper(".swiper-games2",{nested:!0,slidesPerView:"auto",spaceBetween:0,autoplay:{delay:2e3},on:{slideChange:function(){const e=document.querySelectorAll(".pagination_inner");if(e.length){e.forEach((e=>{const t=e.querySelector(".pagination_progress_line");t&&(t.style.width="0%")}));for(let t=0;t<this.activeIndex;t++)if(e[t]){const r=e[t].querySelector(".pagination_progress_line");r&&(r.style.width="100%")}}},autoplayTimeLeft:function(e,t,r){const o=document.querySelectorAll(".pagination_inner");if(o.length&&this.activeIndex<o.length){const e=o[this.activeIndex].querySelector(".pagination_progress_line");if(e){const t=100*(1-r);e.style.width=`${t}%`}}}},speed:300}),swiperPress=new Swiper(".swiper-press",{direction:"horizontal",slidesPerView:"auto",spaceBetween:0,centeredSlides:!1,grabCursor:!0,speed:300,navigation:{nextEl:".swiper-press-next",prevEl:".swiper-press-prev"}}),title=document.querySelector(".hero_title"),gradient=document.querySelector(".hero-gradient-overlay"),titleBox=document.querySelector(".hero-content"),EMPTY_CELL="empty",COLORS=["rgba(84, 182, 99, 0.8)","rgba(129, 92, 217, 0.8)","rgba(51, 98, 236, 0.8)","rgba(255, 212, 0, 0.8)"],SHAPES=[[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],[[1,0,0],[1,1,1],[0,0,0]],[[0,0,1],[1,1,1],[0,0,0]],[[1,1],[1,1]],[[0,1,1],[1,1,0],[0,0,0]],[[0,1,0],[1,1,1],[0,0,0]],[[1,1,0],[0,1,1],[0,0,0]]];let board=[],currentPiece=null,currentX=0,currentY=0,gameOver=!1,gameInterval=null,cellSize=0,ROWS=20,COLS=21,gameInitialized=!1,gamePaused=!1,prevShapeIndex=null,prevColorIndex=null;const gameBoard=document.querySelector("#tetris-board");function initializeTetris(){console.log("Tetris initializing..."),gameBoard?(startGame(),gameInitialized=!0,console.log("Tetris initialization complete")):console.error("Game board not found!")}function calculateBoardDimensions(){const e=document.documentElement.clientWidth,t=window.innerHeight;COLS=e<=479?12:21,cellSize=e/COLS;const r=Math.floor(t/cellSize);ROWS=r;const o=ROWS*cellSize;gameBoard.style.width=`${e}px`,gameBoard.style.height=`${o}px`,gameBoard.style.maxHeight="100dvh",gameBoard.style.zIndex="1"}function initBoard(){board=[];for(let e=0;e<ROWS;e++){board[e]=[];for(let t=0;t<COLS;t++)board[e][t]="empty"}}function createBoardDivs(){calculateBoardDimensions(),gameBoard.innerHTML="";for(let e=0;e<ROWS;e++)for(let t=0;t<COLS;t++){const r=document.createElement("div");r.className="tetris-cell",r.id=`cell-${e}-${t}`,r.style.width=`${cellSize}px`,r.style.height=`${cellSize}px`,r.style.position="absolute",r.style.top=e*cellSize+"px",r.style.left=t*cellSize+"px",gameBoard.appendChild(r)}}function updateBoard(){for(let e=0;e<ROWS;e++)for(let t=0;t<COLS;t++){const r=document.getElementById(`cell-${e}-${t}`);"empty"===board[e][t]?(r.style.backgroundColor="transparent",r.style.backdropFilter="none"):(r.style.backgroundColor=COLORS[board[e][t]],r.style.backdropFilter="blur(5px)")}}function newPiece(){let e,t;do{e=Math.floor(Math.random()*SHAPES.length)}while(e===prevShapeIndex);do{t=Math.floor(Math.random()*COLORS.length)}while(t===prevColorIndex);prevShapeIndex=e,prevColorIndex=t;const r=SHAPES[e];currentPiece={shape:r,color:t,x:Math.floor(COLS/2)-Math.floor(r[0].length/2),y:0},isValidMove(0,0)||(gameOver=!0,clearInterval(gameInterval),title.innerHTML="Try again",titleBox.classList.add("is-top"),gradient.classList.add("is-top"))}function isValidMove(e,t,r=null){const o=r||currentPiece.shape;for(let r=0;r<o.length;r++)for(let n=0;n<o[r].length;n++)if(o[r][n]){const o=currentPiece.x+n+e,a=currentPiece.y+r+t;if(o<0||o>=COLS||a>=ROWS)return!1;if(a>=0&&"empty"!==board[a][o])return!1}return!0}function rotatePiece(){const e=[],t=currentPiece.shape.length;for(let r=0;r<t;r++){e[r]=[];for(let o=0;o<t;o++)e[r][o]=currentPiece.shape[t-1-o][r]}isValidMove(0,0,e)&&(currentPiece.shape=e)}function moveDown(){isValidMove(0,1)?currentPiece.y++:(lockPiece(),clearLines(),newPiece()),drawPiece()}function moveLeft(){isValidMove(-1,0)&&(currentPiece.x--,drawPiece())}function moveRight(){isValidMove(1,0)&&(currentPiece.x++,drawPiece())}function dropPiece(){for(;isValidMove(0,1);)currentPiece.y++;lockPiece(),clearLines(),newPiece(),drawPiece()}function lockPiece(){for(let e=0;e<currentPiece.shape.length;e++)for(let t=0;t<currentPiece.shape[e].length;t++)if(currentPiece.shape[e][t]){const r=currentPiece.y+e,o=currentPiece.x+t;r>=0&&(board[r][o]=currentPiece.color)}}function clearLines(){for(let e=ROWS-1;e>=0;e--){let t=!0;for(let r=0;r<COLS;r++)if("empty"===board[e][r]){t=!1;break}if(t){for(let t=e;t>0;t--)for(let e=0;e<COLS;e++)board[t][e]=board[t-1][e];for(let e=0;e<COLS;e++)board[0][e]="empty";e++}}}function drawPiece(){updateBoard();for(let e=0;e<currentPiece.shape.length;e++)for(let t=0;t<currentPiece.shape[e].length;t++)if(currentPiece.shape[e][t]){const r=currentPiece.y+e,o=currentPiece.x+t;if(r>=0){const e=document.getElementById(`cell-${r}-${o}`);e&&(e.style.backgroundColor=COLORS[currentPiece.color],e.style.backdropFilter="blur(5px)")}}}function pauseGame(){gameOver||gamePaused||(clearInterval(gameInterval),gamePaused=!0,console.log("Game paused"))}function resumeGame(){!gameOver&&gamePaused&&(gameInterval=setInterval(moveDown,500),gamePaused=!1,console.log("Game resumed"))}function togglePause(){gamePaused?resumeGame():pauseGame()}function startGame(){console.log("Starting game..."),calculateBoardDimensions(),initBoard(),createBoardDivs(),newPiece(),updateBoard(),drawPiece(),gameInterval=setInterval(moveDown,500)}function restartGame(){title.innerHTML="PixelVerse",titleBox.classList.remove("is-top"),gradient.classList.remove("is-top"),gameInterval&&clearInterval(gameInterval),gameOver=!1,gamePaused=!1,initBoard(),createBoardDivs(),newPiece(),updateBoard(),drawPiece(),gameInterval=setInterval(moveDown,500)}document.addEventListener("DOMContentLoaded",(function(){console.log("Tetris initialization starting"),setTimeout(initializeTetris,100)}));const leftButton=document.querySelector(".joystick_arrow.left"),rightButton=document.querySelector(".joystick_arrow.right"),downButton=document.querySelector(".joystick_arrow.bottom"),rotateButton=document.querySelector(".joystick_arrow.top");[leftButton,rightButton,downButton,rotateButton].forEach((e=>{e&&(e.addEventListener("dragstart",(e=>e.preventDefault())),e.style.userSelect="none",e.style.webkitUserSelect="none",e.setAttribute("draggable","false"))}));let leftInterval=null,rightInterval=null,downInterval=null;function setupButtonControls(e,t,r){e.addEventListener("click",(e=>{e.preventDefault(),t()})),e.addEventListener("touchstart",(e=>{e.preventDefault(),r.current&&clearInterval(r.current),t(),r.current=setInterval(t,100)})),e.addEventListener("touchend",(e=>{e.preventDefault(),r.current&&(clearInterval(r.current),r.current=null)})),e.addEventListener("touchcancel",(e=>{e.preventDefault(),r.current&&(clearInterval(r.current),r.current=null)}))}setupButtonControls(leftButton,moveLeft,{current:leftInterval}),setupButtonControls(rightButton,moveRight,{current:rightInterval}),setupButtonControls(downButton,moveDown,{current:downInterval}),rotateButton.addEventListener("click",(e=>{e.preventDefault(),rotatePiece(),drawPiece()})),rotateButton.addEventListener("touchstart",(e=>{e.preventDefault(),rotatePiece(),drawPiece()})),document.addEventListener("keydown",(e=>{if(!gameOver)switch(e.key){case"ArrowLeft":case"a":case"A":gamePaused||moveLeft(),e.preventDefault();break;case"ArrowRight":case"d":case"D":gamePaused||moveRight(),e.preventDefault();break;case"ArrowDown":case"s":case"S":gamePaused||moveDown(),e.preventDefault();break;case"ArrowUp":case"w":case"W":gamePaused||(rotatePiece(),drawPiece()),e.preventDefault();break;case" ":gamePaused||dropPiece(),e.preventDefault();break;case"p":case"P":case"Escape":togglePause(),e.preventDefault()}}));let touchStartX=null,touchStartY=null;const MIN_SWIPE_DISTANCE=30;gameBoard.addEventListener("touchstart",(e=>{gameOver||(touchStartX=e.touches[0].clientX,touchStartY=e.touches[0].clientY,e.preventDefault())})),gameBoard.addEventListener("touchmove",(e=>{gameOver||e.preventDefault()})),gameBoard.addEventListener("touchend",(e=>{if(gameOver||null===touchStartX||null===touchStartY)return;const t=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY,o=t-touchStartX,n=r-touchStartY;Math.abs(o)>Math.abs(n)?Math.abs(o)>=30&&(o>0?gamePaused||moveRight():gamePaused||moveLeft()):Math.abs(n)>=30&&(n>0?gamePaused||dropPiece():gamePaused||(rotatePiece(),drawPiece())),touchStartX=null,touchStartY=null,e.preventDefault()})),title.addEventListener("click",restartGame),startGame();